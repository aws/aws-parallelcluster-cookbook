#!/bin/bash
set -ex

# This script is used to run cfn-hup is a way that is suitable to be managed by supervisord.
# In particular, cfn-hup is executed in no-daemon mode.
#
# Usage:   ./cfn-hup-runner.sh

[ -f /etc/profile.d/proxy.sh ] && . /etc/profile.d/proxy.sh

while true; do
  <%= @cfn_bootstrap_virtualenv_path %>/bin/cfn-hup --no-daemon --verbose
  sleep 60
done
