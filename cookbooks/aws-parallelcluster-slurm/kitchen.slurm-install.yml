---
verifier:
  name: inspec
  inspec_tests:
    - test

suites:
  - name: munge
    run_list:
      - recipe[aws-parallelcluster-tests::setup]
      - recipe[aws-parallelcluster-tests::test_resource]
    verifier:
      controls:
        - /tag:install_munge/
    attributes:
      resource: munge
  - name: slurm_dependencies
    run_list:
      - recipe[aws-parallelcluster-tests::setup]
      - recipe[aws-parallelcluster-tests::test_resource]
    verifier:
      controls:
        - /tag:install_slurm_dependencies/
    attributes:
      resource: slurm_dependencies
  - name: jwt_dependencies
    run_list:
      - recipe[aws-parallelcluster-tests::setup]
      - recipe[aws-parallelcluster-tests::test_resource]
    verifier:
      controls:
        - /tag:install_jwt_dependencies/
    attributes:
      resource: jwt_dependencies
  - name: mysql_client
    run_list:
      - recipe[aws-parallelcluster-tests::setup]
      - recipe[aws-parallelcluster-tests::test_resource]
    verifier:
      controls:
        - /mysql_client/
    attributes:
      resource: mysql_client
  - name: network_service_restart
    run_list:
      - recipe[aws-parallelcluster-tests::setup]
      - recipe[aws-parallelcluster-tests::test_resource]
    verifier:
      controls:
        - network_service_running
    attributes:
      resource: network_service
  - name: network_service_reload
    run_list:
      - recipe[aws-parallelcluster-tests::setup]
      - recipe[aws-parallelcluster-tests::test_resource]
    verifier:
      controls:
        - network_service_running
    attributes:
      resource: network_service:reload
  - name: dns_domain
    run_list:
      - recipe[aws-parallelcluster-tests::setup]
      - recipe[aws-parallelcluster-tests::test_resource]
    verifier:
      controls:
        - /tag:install_dns_domain/
    attributes:
      resource: dns_domain
