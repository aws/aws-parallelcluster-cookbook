# Generated by Chef for <%= node['fqdn'] -%>
# Local modifications will be overwritten.
<% case node['platform_family'] -%>
<%# RHEL -%>
<% when 'rhel' -%>
# Rendered RHEL template variant
STATD_PORT="<%= node['nfs']['port']['statd'] -%>"
STATD_OUTGOING_PORT="<%= node['nfs']['port']['statd_out'] -%>"
STATDARG="-p <%= node['nfs']['port']['statd'] -%> -o <%= node['nfs']['port']['statd_out'] -%>"
MOUNTD_PORT="<%= node['nfs']['port']['mountd'] -%>"
RPCMOUNTDOPTS="-p <%= node['nfs']['port']['mountd'] -%>"
LOCKD_UDPPORT="<%= node['nfs']['port']['lockd'] -%>"
LOCKD_TCPPORT="<%= node['nfs']['port']['lockd'] -%>"
RQUOTAD_PORT="<%= node['nfs']['port']['rquotad'] -%>"
  <% unless node['nfs']['v2'].nil? -%>
MOUNTD_NFS_V2="<%= node['nfs']['v2'] -%>"
  <% end -%>
  <% unless node['nfs']['v3'].nil? -%>
MOUNTD_NFS_V3="<%= node['nfs']['v3'] -%>"
  <% end -%>
RQUOTAD="<%= node['nfs']['rquotad'] -%>"
  <% unless node['nfs']['threads'] == 0 -%>
RPCNFSDCOUNT="<%= node['nfs']['threads'] -%>"
  <% end -%>

<%# SUSE -%>
<% when 'suse' -%>
# Rendered SUSE template variant
  <% unless node['nfs']['threads'] == 0 -%>
USE_KERNEL_NFSD_NUMBER="<%= node['nfs']['threads'] -%>"
  <% end -%>
MOUNTD_PORT="<%= node['nfs']['port']['mountd'] -%>"
STATD_PORT="<%= node['nfs']['port']['statd'] -%>"
LOCKD_TCPPORT="<%= node['nfs']['port']['lockd'] -%>"
LOCKD_UDPPORT="<%= node['nfs']['port']['lockd'] -%>"
NFS_START_SERVICES="yes"
  <% unless node['nfs']['v4'].nil? -%>
NFS4_SUPPORT="<%= node['nfs']['v4'] -%>"
  <% end -%>

<%# FreeBSD -%>
<% when 'freebsd' -%>
# Rendered FreeBSD template variant
portmap_enabled="YES"
nfs_server_enable="YES"
  <% unless node['nfs']['v4'].nil? -%>
nfsv4_server_enable="<%= node['nfs']['v4'] -%>"
  <% end -%>
nfs_server_flags="<%= node['nfs']['server_flags'] -%>"

<%# Debian/Ubuntu -%>
<% when 'debian' -%>
# Rendered Debian/Ubuntu template variant
RPCMOUNTDOPTS="-p <%= node['nfs']['port']['mountd'] %>"
  <% unless node['nfs']['threads'] == 0 -%>
RPCNFSDCOUNT="<%= node['nfs']['threads'] -%><% if node['nfs']['v4'] == 'no' -%> --no-nfs-version 4<% end -%>"
  <% end -%>
<% end -%>
