# This file is automatically generated by pcluster
{% for compute_resource_name, compute_resource_config in queue_config.compute_resource_settings.items() %}
    {% if compute_resource_config.gpus > 0 %}
        {% set static_size = compute_resource_config.min_count %}
        {% set dynamic_size = compute_resource_config.max_count - compute_resource_config.min_count %}
        {% set sanitized_compute_name = compute_resource_name | sanify_instance_type %}
        {% if static_size > 0 %}
NodeName={{ queue_name }}-st-{{ sanitized_compute_name }}-[1-{{ static_size }}] Name=gpu Type={{ compute_resource_config.gpu_type }} File=/dev/nvidia[0-{{ compute_resource_config.gpus - 1 }}]
        {% endif %}
        {% if dynamic_size > 0 %}
NodeName={{ queue_name }}-dy-{{ sanitized_compute_name }}-[1-{{ dynamic_size }}] Name=gpu Type={{ compute_resource_config.gpu_type }} File=/dev/nvidia[0-{{ compute_resource_config.gpus - 1 }}]
        {% endif %}
    {% endif %}
{% endfor %}
