# This file is automatically generated by pcluster

{% for instance_type, instance_info in queue.instances.items() %}
    {% if instance_info.gpus > 0 %}
        {% set has_static_nodes = true if instance_info.static_size > 0 else false %}
        {% set has_dynamic_nodes = true if instance_info.dynamic_size > 0 else false %}
        {% if has_static_nodes %}
NodeName={{ queue.queue_name }}-static-{{ instance_type }}-[1-{{ instance_info.static_size }}] Name=gpu Type=tesla File=/dev/nvidia[0-{{ instance_info.gpus - 1 }}]
        {% endif %}
        {% if has_dynamic_nodes %}
NodeName={{ queue.queue_name }}-dynamic-{{ instance_type }}-[1-{{ instance_info.dynamic_size }}] Name=gpu Type=tesla File=/dev/nvidia[0-{{ instance_info.gpus - 1 }}]
        {% endif %}
    {% endif %}
{% endfor %}
