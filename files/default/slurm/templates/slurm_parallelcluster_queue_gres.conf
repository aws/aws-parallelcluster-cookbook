# This file is automatically generated by pcluster

{% for compute_resource_config in queue_config.compute_resource_settings.values() %}
    {% if compute_resource_config.gpus > 0 %}
        {% set static_size = compute_resource_config.min_count %}
        {% set dynamic_size = compute_resource_config.max_count - compute_resource_config.min_count %}
        {% if static_size > 0 %}
NodeName={{ queue_name }}-static-{{ compute_resource_config.instance_type }}-[1-{{ static_size }}] Name=gpu Type=tesla File=/dev/nvidia[0-{{ compute_resource_config.gpus - 1 }}]
        {% endif %}
        {% if dynamic_size > 0 %}
NodeName={{ queue_name }}-dynamic-{{ compute_resource_config.instance_type }}-[1-{{ dynamic_size }}] Name=gpu Type=tesla File=/dev/nvidia[0-{{ compute_resource_config.gpus - 1 }}]
        {% endif %}
    {% endif %}
{% endfor %}
